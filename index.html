<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game Saray</title>

<style>
:root{
  --bg1:#00ffff;
  --bg2:#000;
  --card:#111;
  --text:#fff;
  --btn:#0ff;
}

body.dark{
  --bg1:#000;
  --bg2:#111;
  --card:#000;
  --text:#00ffff;
  --btn:#00aaaa;
}

body{
  margin:0;
  font-family:Arial;
  background: radial-gradient(circle at top, var(--bg1), var(--bg2));
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  padding:20px;
  color:var(--text);
  transition:0.3s;
}

.toggleMode{
  position:fixed;
  top:10px;
  right:10px;
  padding:8px 15px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:bold;
}

.container{
  text-align:center;
  background:var(--card);
  padding:30px;
  border-radius:20px;
  box-shadow:0 0 30px var(--bg1);
  width:95%;
  max-width:450px;
}

input, select{
  padding:10px;
  margin:8px 0;
  width:100%;
  border-radius:10px;
  border:none;
  text-align:center;
}

button{
  padding:10px;
  margin-top:5px;
  width:100%;
  border:none;
  border-radius:10px;
  cursor:pointer;
  background:var(--btn);
  font-weight:bold;
}

.hidden{display:none;}

.processingScreen{
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  color:#0ff;
  font-size:22px;
  z-index:999;
}

.loader{
  margin-top:15px;
  border:4px solid #222;
  border-top:4px solid #0ff;
  border-radius:50%;
  width:40px;
  height:40px;
  animation:spin 1s linear infinite;
}

@keyframes spin{
  0%{transform:rotate(0);}
  100%{transform:rotate(360deg);}
}

.adminBox{
  max-height:300px;
  overflow:auto;
  text-align:left;
  background:#000;
  padding:10px;
  margin-top:10px;
  font-size:13px;
}
</style>
</head>
<body>

<button class="toggleMode" onclick="toggleMode()">Dark / Light</button>

<div class="container" id="mainBox">
  <h2>KOD DAXƒ∞L ET</h2>
  <input type="text" id="codeInput" placeholder="Kod daxil et">
  <button onclick="checkCode()">KE√áƒ∞D ET</button>
</div>

<div class="container hidden" id="orderBox">
  <h2>UC SE√á</h2>
  <select id="ucSelect">
    <option value="60 UC">60 UC</option>
    <option value="325 UC">325 UC</option>
    <option value="660 UC">660 UC</option>
    <option value="1800 UC">1800 UC</option>
  </select>

  <h2>OYUN√áU ID</h2>
  <input type="text" id="playerID" placeholder="R…ôq…ôm daxil et">
  <button onclick="confirmOrder()">DAVAM ET</button>
</div>

<div class="container hidden" id="receiptBox">
  <h2>Q∆èBZ ENDƒ∞R</h2>
  <button onclick="generateReceipt()">ENDƒ∞R</button>
</div>

<div class="container hidden" id="adminPanel">
  <h2>ADMIN PANEL</h2>

  <input type="text" id="newCode" placeholder="Yeni kod">
  <button onclick="addCode()">Kod …ôlav…ô et</button>

  <button onclick="clearLogs()">Loglarƒ± sil</button>

  <h3>Aktiv Kodlar:</h3>
  <div class="adminBox" id="codeList"></div>

  <h3>ƒ∞stifad…ô Loglarƒ±:</h3>
  <div class="adminBox" id="logList"></div>
</div>

<script>

let validCodes = JSON.parse(localStorage.getItem("validCodes")) || [
  "GAMESARAYMS0279",
  "GAMESARAY00186KK",
  "GAMESARAY196028CF"
];

let logs = JSON.parse(localStorage.getItem("logs")) || [];

function saveData(){
  localStorage.setItem("validCodes", JSON.stringify(validCodes));
  localStorage.setItem("logs", JSON.stringify(logs));
}

function toggleMode(){
  document.body.classList.toggle("dark");
}

function showProcessing(callback){
  const screen=document.createElement("div");
  screen.className="processingScreen";
  screen.innerHTML="Processing...<div class='loader'></div>";
  document.body.appendChild(screen);

  setTimeout(()=>{
    document.body.removeChild(screen);
    callback();
  },1500);
}

// Admin trigger
document.addEventListener("input", function(e){
  if(e.target.value==="Admin Panel 2026"){
    openAdmin();
  }
});

function openAdmin(){
  document.getElementById("mainBox").classList.add("hidden");
  document.getElementById("orderBox").classList.add("hidden");
  document.getElementById("receiptBox").classList.add("hidden");
  document.getElementById("adminPanel").classList.remove("hidden");
  renderAdmin();
}

function renderAdmin(){
  document.getElementById("codeList").innerHTML =
    validCodes.map(c=>"‚Ä¢ "+c).join("<br>");

  document.getElementById("logList").innerHTML =
    logs.map(l=>"üïí "+l.time+" | ID: "+l.id+" | "+l.uc+" | Kod: "+l.code).join("<br>");
}

function addCode(){
  const newCode=document.getElementById("newCode").value.trim();
  if(newCode){
    validCodes.push(newCode);
    saveData();
    renderAdmin();
  }
}

function clearLogs(){
  logs=[];
  saveData();
  renderAdmin();
}

function checkCode(){
  showProcessing(()=>{
    const code=document.getElementById("codeInput").value.trim();
    if(!validCodes.includes(code)) return;

    validCodes = validCodes.filter(c=>c!==code);
    saveData();

    document.getElementById("mainBox").classList.add("hidden");
    document.getElementById("orderBox").classList.remove("hidden");
  });
}

function confirmOrder(){
  showProcessing(()=>{
    document.getElementById("orderBox").classList.add("hidden");
    document.getElementById("receiptBox").classList.remove("hidden");
  });
}

function generateReceipt(){
  showProcessing(()=>{

    const uc=document.getElementById("ucSelect").value;
    const id=document.getElementById("playerID").value;

    function randomCode(){
      const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      let r="";
      for(let i=0;i<9;i++){
        r+=chars.charAt(Math.floor(Math.random()*chars.length));
      }
      return r;
    }

    const receiptCode=randomCode();

    logs.push({
      time:new Date().toLocaleString(),
      id:id,
      uc:uc,
      code:receiptCode
    });

    saveData();

    const canvas=document.createElement("canvas");
    canvas.width=700;
    canvas.height=400;
    const ctx=canvas.getContext("2d");

    ctx.fillStyle="#fff";
    ctx.fillRect(0,0,700,400);

    ctx.fillStyle="#000";
    ctx.font="bold 26px Arial";
    ctx.textAlign="center";
    ctx.fillText("GAME SARAY ∆èM∆èLƒ∞YYAT Q∆èBZƒ∞",350,70);

    ctx.textAlign="left";
    ctx.font="20px Arial";
    ctx.fillText("Tarix: "+new Date().toLocaleString(),80,150);
    ctx.fillText("Oyun√ßu ID: "+id,80,200);
    ctx.fillText("UC: "+uc,80,240);
    ctx.fillText("Q…ôbz Kodu: "+receiptCode,80,280);

    const link=document.createElement("a");
    link.download="GameSaray_Qebz.png";
    link.href=canvas.toDataURL("image/png");
    link.click();

    document.body.innerHTML="<h2 style='text-align:center;color:#0ff;'>∆èm…ôliyyat tamamlandƒ±</h2>";

  });
}

</script>
</body>
</html>
