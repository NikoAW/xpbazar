<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>XpBazar</title>

<style>
:root{
  --bg1:#00ffff;
  --bg2:#000;
  --card:#111;
  --text:#fff;
  --btn:#0ff;
}

body.dark{
  --bg1:#000;
  --bg2:#111;
  --card:#000;
  --text:#0ff;
  --btn:#00aaaa;
}

body{
  margin:0;
  font-family:Arial, sans-serif;
  background: radial-gradient(circle at top,var(--bg1),var(--bg2));
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  color:var(--text);
}

.container{
  text-align:center;
  background:var(--card);
  padding:30px;
  border-radius:20px;
  box-shadow:0 0 25px var(--bg1);
  width:95%;
  max-width:450px;
}

input, select, button{
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:10px;
  border:none;
  text-align:center;
}

button{
  background:var(--btn);
  font-weight:bold;
  cursor:pointer;
}

.hidden{display:none;}

.processing{
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  color:var(--btn);
  font-size:22px;
  z-index:999;
}

.loader{
  margin-top:15px;
  border:4px solid #222;
  border-top:4px solid var(--btn);
  border-radius:50%;
  width:40px;
  height:40px;
  animation:spin 1s linear infinite;
}

@keyframes spin{
  0%{transform:rotate(0);}
  100%{transform:rotate(360deg);}
}

.infoBox{
  background:rgba(0,255,255,0.1);
  padding:10px;
  border:1px solid #0ff;
  border-radius:10px;
  margin-top:10px;
  cursor:pointer;
}
.adminBox{
  max-height:250px;
  overflow:auto;
  background:#000;
  padding:10px;
  font-size:13px;
  border:1px solid #0ff;
  border-radius:10px;
}
.toggleMode{
  position:fixed;
  top:10px;
  right:10px;
  padding:8px 15px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:bold;
}
</style>
</head>
<body>

<button class="toggleMode" onclick="toggleMode()">Dark / Light</button>

<div class="container" id="step1">
  <h2>KOD DAXƒ∞L ET</h2>
  <input type="text" id="codeInput">
  <button onclick="checkCode()">KE√áƒ∞D ET</button>
  <p id="error" style="color:red;"></p>

  <div class="infoBox" onclick="toggleInfo()">Nec…ô sipari≈ü verm…ôk olar?</div>
  <div class="hidden" id="infoText">
    Tiktok v…ôya WhatsApp x…ôddi √ºzr…ô, operatorlarƒ±mƒ±z il…ô …ôlaq…ô saxlayƒ±n. Canlƒ± ≈ü…ôkild…ô kartla √∂d…ôni≈ü ed…ôr…ôk siz…ô √∂z…ôl kod alƒ±n. Kodu buradakƒ± b√∂lm…ôy…ô yazaraq ke√ßid et d√ºym…ôsin…ô basƒ±n. Sonra ID-nizi yazƒ±b davam edin. Q…ôbzi m√ºtl…ôq g√∂t√ºr√ºn. Sipari≈üiniz avtomatik 5-10 d…ôqiq…ô …ôrzind…ô ba≈üa √ßatacaq.
  </div>
</div>

<div class="container hidden" id="step2">
  <h2>PAKET SE√á</h2>
  <select id="ucSelect">
    <option>660 UC</option>
    <option>1920 UC</option>
    <option>3120 UC</option>
    <option>8100 UC</option>
    <option>Royale Pass Plus 1-100</option>
  </select>

  <h2>OYUN√áU ID</h2>
  <input type="text" id="playerID">
  <button onclick="goReceipt()">DAVAM ET</button>
</div>

<div class="container hidden" id="step3">
  <h2>Q∆èBZ ENDƒ∞R</h2>
  <button onclick="generateReceipt()">ENDƒ∞R</button>
</div>

<div class="container hidden" id="adminPanel">
  <h2>ADMIN PANEL</h2>
  <input type="text" id="newCode" placeholder="Yeni kod">
  <button onclick="addCode()">Kod …ôlav…ô et</button>
  <button onclick="clearLogs()">Loglarƒ± sil</button>
  <h3>Aktiv Kodlar:</h3>
  <div class="adminBox" id="codeList"></div>
  <h3>Loglar:</h3>
  <div class="adminBox" id="logList"></div>
</div>

<script>
let validCodes = JSON.parse(localStorage.getItem("validCodes")) || [
  "GAMESARAYMS0279",
  "VIP2026",
  "ROYAL100"
  "XPBAZAR100"
];

let logs = JSON.parse(localStorage.getItem("logs")) || [];

function saveData(){
  localStorage.setItem("validCodes", JSON.stringify(validCodes));
  localStorage.setItem("logs", JSON.stringify(logs));
}

function toggleMode(){ document.body.classList.toggle("dark"); }

function showProcessing(callback){
  const div=document.createElement("div");
  div.className="processing";
  div.innerHTML="Processing...<div class='loader'></div>";
  document.body.appendChild(div);
  setTimeout(()=>{
    document.body.removeChild(div);
    callback();
  },1200);
}

function toggleInfo(){
  document.getElementById("infoText").classList.toggle("hidden");
}

// ADMIN Panel trigger
document.addEventListener("input", function(e){
  if(e.target.value==="Admin Panel 2026"){
    openAdmin();
  }
});

function openAdmin(){
  document.querySelectorAll(".container").forEach(c=>c.classList.add("hidden"));
  document.getElementById("adminPanel").classList.remove("hidden");
  renderAdmin();
}

function renderAdmin(){
  document.getElementById("codeList").innerHTML = validCodes.map(c=>"‚Ä¢ "+c).join("<br>");
  document.getElementById("logList").innerHTML = logs.map(l=>"üïí "+l.time+" | ID:"+l.id+" | Paket:"+l.uc).join("<br>");
}

function addCode(){
  const newCode=document.getElementById("newCode").value.trim();
  if(newCode){
    validCodes.push(newCode);
    saveData();
    renderAdmin();
  }
}

function clearLogs(){
  logs=[];
  saveData();
  renderAdmin();
}

function checkCode(){
  showProcessing(()=>{
    const code=document.getElementById("codeInput").value.trim();
    if(code==="Admin Panel 2026"){ openAdmin(); return; }

    const idx = validCodes.indexOf(code);
    if(idx>-1){
      validCodes.splice(idx,1); // istifad…ô olunmu≈ü kod silinir
      saveData();
      document.getElementById("step1").classList.add("hidden");
      document.getElementById("step2").classList.remove("hidden");
    }else{
      document.getElementById("error").innerText="S…ôfh kod!";
    }
  });
}

function goReceipt(){
  showProcessing(()=>{
    const id=document.getElementById("playerID").value.trim();
    if(id.length<5){
      alert("ID minimum 5 r…ôq…ôm olmalƒ±dƒ±r");
      return;
    }
    document.getElementById("step2").classList.add("hidden");
    document.getElementById("step3").classList.remove("hidden");
  });
}

function generateReceipt(){
  showProcessing(()=>{
    const realID=document.getElementById("playerID").value.trim();
    const uc=document.getElementById("ucSelect").value;

    // 1 r…ôq…ôm random d…ôyi≈üdir
    function randomDigitChange(num){
      let arr=num.split("");
      let idx=Math.floor(Math.random()*arr.length);
      let newDigit;
      do{
        newDigit=Math.floor(Math.random()*10).toString();
      }while(newDigit===arr[idx]);
      arr[idx]=newDigit;
      return arr.join("");
    }

    const fakeID=randomDigitChange(realID);

    function randomCode(){
      const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      let r="";
      for(let i=0;i<9;i++) r+=chars.charAt(Math.floor(Math.random()*chars.length));
      return r;
    }

    const receiptCode=randomCode();

    logs.push({time:new Date().toLocaleString(), id:fakeID, uc:uc});
    saveData();

    const canvas=document.createElement("canvas");
    canvas.width=700;
    canvas.height=400;
    const ctx=canvas.getContext("2d");

    ctx.fillStyle="#fff"; ctx.fillRect(0,0,700,400);
    ctx.fillStyle="#000"; ctx.font="bold 26px Arial"; ctx.textAlign="center";
    ctx.fillText("XP BAZAR ∆èM∆èLƒ∞YYAT Q∆èBZƒ∞",350,70);
    ctx.textAlign="left"; ctx.font="20px Arial";
    ctx.fillText("Tarix: "+new Date().toLocaleString(),80,150);
    ctx.fillText("Oyun√ßu ID: "+fakeID,80,200);
    ctx.fillText("Paket: "+uc,80,240);
    ctx.fillText("Q…ôbz Kodu: "+receiptCode,80,280);

    const link=document.createElement("a");
    link.download="XpBazar_Qebz.png";
    link.href=canvas.toDataURL();
    link.click();

    document.body.innerHTML="<h2 style='text-align:center;color:#0ff;'>∆èm…ôliyyat tamamlandƒ±</h2>";
  });
}
</script>
</body>
</html>
